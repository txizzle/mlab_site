!function(e){"use strict";function o(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function r(e,t){this.el=e,this.options=o({},this.options),o(this.options,t),this._init()}var t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},n=t[Modernizr.prefixed("transition")],i={transitions:Modernizr.csstransitions};r.prototype.options={closeEl:"",onBeforeOpen:function(){return!1},onAfterOpen:function(){return!1},onBeforeClose:function(){return!1},onAfterClose:function(){return!1}},r.prototype._init=function(){this.elH=this.el.offsetHeight,this.button=this.el.querySelector("button"),this.expanded=!1,this.contentEl=this.el.querySelector(".morph-content"),this._initEvents()},r.prototype._initEvents=function(){var e=this;if(this.button.addEventListener("click",function(){e.toggle()}),""!==this.options.closeEl){var t=this.el.querySelector(this.options.closeEl);t&&t.addEventListener("click",function(){e.toggle()})}},r.prototype.toggle=function(){if(this.isAnimating)return!1;this.expanded?this.options.onBeforeClose():(classie.addClass(this.el,"active"),this.options.onBeforeOpen()),this.isAnimating=!0;var e=this,t=function(o){return o.target!==this?!1:(i.transitions&&this.removeEventListener(n,t),e.isAnimating=!1,e.expanded?(classie.removeClass(e.el,"active"),e.options.onAfterClose()):e.options.onAfterOpen(),void(e.expanded=!e.expanded))};i.transitions?this.el.addEventListener(n,t):t(),this.el.style.height=this.expanded?this.elH+"px":this.contentEl.offsetHeight+"px",this.expanded?classie.removeClass(this.el,"open"):classie.addClass(this.el,"open")},e.UIMorphingButton=r}(window);